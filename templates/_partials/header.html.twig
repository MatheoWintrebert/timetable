<style>
  /* Styles pour am√©liorer le dropdown */
  .dropdown-enhanced {
    position: relative;
    background: rgba(8, 164, 189, 0.1) !important;
    border: 1px solid rgba(8, 164, 189, 0.3) !important;
    border-radius: var(--border-radius-sm) !important;
  }
  
  .dropdown-enhanced:hover {
    background: rgba(8, 164, 189, 0.2) !important;
    border-color: var(--accent-blue) !important;
  }
  
  .dropdown-indicator {
    font-size: 0.7rem;
    margin-left: 0.5rem;
    transition: transform var(--transition-normal);
    opacity: 0.8;
  }
  
  .dropdown-enhanced[aria-expanded='true'] .dropdown-indicator {
    transform: rotate(180deg);
  }
  
  .dropdown-enhanced[aria-expanded='true'] {
    background: var(--accent-blue) !important;
    color: white !important;
  }
  
  /* Headers dans le dropdown */
  .dropdown-header {
    color: var(--accent-blue) !important;
    font-weight: 600 !important;
    font-size: 0.8rem !important;
    text-transform: uppercase !important;
    letter-spacing: 0.05em !important;
    padding: var(--spacing-sm) var(--spacing-md) !important;
    margin-bottom: var(--spacing-xs) !important;
    display: flex !important;
    align-items: center !important;
    gap: var(--spacing-sm) !important;
    border-bottom: 1px solid var(--input-border) !important;
  }
  
  /* Am√©lioration du dropdown menu */
  .dropdown-menu {
    min-width: 250px !important;
    padding: var(--spacing-md) !important;
    box-shadow: var(--shadow-xl) !important;
  }
  
  /* Styles sp√©cifiques pour les actions invit√©s */
  .guest-actions {
    display: flex;
    gap: var(--spacing-sm);
  }
  
  /* Am√©lioration pour tr√®s petits √©crans */
  @media (max-width: 350px) {
    .navbar-brand span {
      display: none;
    }
  
    .user-info {
      font-size: 0.8rem;
    }
  }
  
  /* Animation du dropdown */
  .dropdown-menu {
    opacity: 0;
    transform: translateY(-10px);
    transition: all 0.2s ease;
    pointer-events: none;
  }
  
  .dropdown-menu.show {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
  }
  
  /* Responsive pour le dropdown */
  @media (max-width: 991.98px) {
    .dropdown-enhanced {
      background: transparent !important;
      border: none !important;
    }
  
    .dropdown-indicator {
      display: none;
    }
  
    .dropdown-menu {
      position: static !important;
      transform: none !important;
      box-shadow: none !important;
      border: none !important;
      background: rgba(42, 45, 47, 0.5) !important;
      border-radius: var(--border-radius-md) !important;
      margin: var(--spacing-sm) 0 !important;
    }
  }
</style>
<nav class="navbar navbar-expand-lg navbar-dark">
  <div class="container-fluid-custom">
    <!-- Brand -->
    <a class="navbar-brand" href="{{ path('app_main') }}">
      <img src="{{ asset('assets/logo.png') }}" alt="Logo" style="max-width: 32px; height: auto;" />
      <span>EDT Manager</span>
    </a>

    <!-- Mobile toggle -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>

    <!-- Navigation content -->
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav me-auto">
        {% if app.user is defined and app.user %}
          <!-- Mon Compte -->
          <li class="nav-item">
            <a class="nav-link" href="{{ path('app_account_manager') }}">
              <span>üë§</span>
              Mon Compte
            </a>
          </li>

          {% if is_granted('ROLE_ADMIN') %}
            <!-- Administration -->
            <li class="nav-item">
              <a class="nav-link" href="{{ path('app_admin') }}">
                <span>‚öôÔ∏è</span>
                Administration
              </a>
            </li>

            <!-- Menu de gestion -->
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownGestion" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                <span>üìä</span>
                Gestion
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdownGestion">
                <li>
                  <a class="dropdown-item" href="{{ path('app_niveau') }}">
                    <span>üéØ</span>
                    Niveaux
                  </a>
                </li>
                <li>
                  <a class="dropdown-item" href="{{ path('app_classe') }}">
                    <span>üéì</span>
                    Classes
                  </a>
                </li>
                <li>
                  <a class="dropdown-item" href="{{ path('app_matiere') }}">
                    <span>üìö</span>
                    Mati√®res
                  </a>
                </li>
                <li>
                  <hr class="dropdown-divider" />
                </li>
                <li>
                  <a class="dropdown-item" href="{{ path('app_professeur') }}">
                    <span>üë®‚Äçüè´</span>
                    Professeurs
                  </a>
                </li>
                <li>
                  <a class="dropdown-item" href="{{ path('app_programme') }}">
                    <span>üìã</span>
                    Programmes
                  </a>
                </li>
                <li>
                  <hr class="dropdown-divider" />
                </li>
                <li>
                  <a class="dropdown-item" href="{{ path('app_emploi') }}">
                    <span>üìÖ</span>
                    Emploi du temps vide
                  </a>
                </li>
              </ul>
            </li>
          {% endif %}
        {% else %}
          <!-- Connexion pour invit√©s -->
          <li class="nav-item">
            <a class="nav-link" href="{{ path('app_login') }}">
              <span>üîê</span>
              Connexion
            </a>
          </li>
        {% endif %}
      </ul>

      <!-- Actions utilisateur √† droite -->
      <div class="navbar-actions">
        {% if app.user is defined and app.user %}
          <!-- Informations utilisateur visibles -->
          <div class="user-info">
            <div class="user-label">Connect√© en tant que</div>
            <div class="user-email">{{ app.user.userIdentifier }}</div>
          </div>

          <!-- Bouton de d√©connexion -->
          <form method="post" action="{{ path('app_logout') }}">
            <button class="btn btn-outline-light btn-sm" data-turbo="false">
              <span>üö™</span>
              <span class="d-none d-sm-inline">Se d√©connecter</span>
              <span class="d-sm-none">Exit</span>
            </button>
          </form>
        {% else %}
          <!-- Actions pour invit√©s -->
          <div class="guest-actions">
            <a href="{{ path('app_register') }}" class="btn btn-outline-light btn-sm">
              <span>‚ú®</span>
              S'inscrire
            </a>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</nav>
<style>
  nav {
    margin-top: var(--spacing-md);
    padding-top: var(--spacing-md);
    border-top: 1px solid var(--input-border);
  }
  
  .navbar-nav .nav-link {
    margin: var(--spacing-xs) 0;
    text-align: center;
  }
  
  /* User info styling */
  .text-primary {
    color: var(--accent-blue) !important;
  }
  
  /* Animation pour le logo */
  .navbar-brand img {
    transition: all var(--transition-normal);
  }
  
  .navbar-brand:hover img {
    transform: rotate(5deg) scale(1.1);
  }
</style>
